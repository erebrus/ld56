[gd_scene load_steps=47 format=3 uid="uid://b5lgniaadan1y"]

[ext_resource type="Script" path="res://src/frog/frog.gd" id="1_mohle"]
[ext_resource type="Script" path="res://src/frog/frog_controller.gd" id="2_mpehw"]
[ext_resource type="PackedScene" uid="uid://bajmr10nfg8pe" path="res://src/frog/head/head.tscn" id="2_pyle1"]
[ext_resource type="Script" path="res://addons/xsm/state.gd" id="2_ucc1o"]
[ext_resource type="Script" path="res://src/frog/xsm/frog_idle.gd" id="4_sbak6"]
[ext_resource type="Texture2D" uid="uid://dc5gdocr7wibq" path="res://assets/gfx/player/jump/5.png" id="5_4cau3"]
[ext_resource type="Script" path="res://src/frog/xsm/frog_hop.gd" id="5_dasfo"]
[ext_resource type="Script" path="res://src/frog/xsm/frog_jump.gd" id="6_5df1m"]
[ext_resource type="Texture2D" uid="uid://bp00xsveur3ff" path="res://assets/gfx/player/walk/1.png" id="6_s2tbk"]
[ext_resource type="Script" path="res://src/frog/xsm/frog_fall.gd" id="7_c7jib"]
[ext_resource type="Texture2D" uid="uid://dft48gk4nlx4d" path="res://assets/gfx/player/walk/2.png" id="7_ho7in"]
[ext_resource type="Script" path="res://src/frog/xsm/frog_land.gd" id="8_4670w"]
[ext_resource type="Texture2D" uid="uid://bsovwvxwrqxsm" path="res://assets/gfx/player/walk/3.png" id="8_ul0ep"]
[ext_resource type="Texture2D" uid="uid://tdxhqrvroxc2" path="res://assets/gfx/player/walk/4.png" id="9_ppksw"]
[ext_resource type="Texture2D" uid="uid://iy2nxoiiec8g" path="res://assets/gfx/player/idle/1.png" id="9_ydjvk"]
[ext_resource type="Texture2D" uid="uid://dxhyypqloyepm" path="res://assets/gfx/player/jump/1.png" id="10_171m6"]
[ext_resource type="Texture2D" uid="uid://dsqqin6ddr7yl" path="res://assets/gfx/player/idle/2.png" id="10_e3ynl"]
[ext_resource type="Texture2D" uid="uid://sojk5mhktaqk" path="res://assets/gfx/player/idle/3.png" id="11_a7dx1"]
[ext_resource type="Texture2D" uid="uid://mpoixfnwvlju" path="res://assets/gfx/player/jump/2.png" id="11_e7owm"]
[ext_resource type="Texture2D" uid="uid://cta2sycy6ma76" path="res://assets/gfx/player/jump/3.png" id="12_l7yib"]
[ext_resource type="Texture2D" uid="uid://v3anpcbg15c4" path="res://assets/gfx/player/idle/4.png" id="12_wt0sv"]
[ext_resource type="Texture2D" uid="uid://bte1i1wwnobrq" path="res://assets/gfx/player/jump/4.png" id="13_djaso"]
[ext_resource type="Texture2D" uid="uid://cpdto5kkpxvco" path="res://assets/gfx/player/idle/5.png" id="13_rikfb"]
[ext_resource type="Texture2D" uid="uid://gsdmfyoeckf" path="res://assets/gfx/player/jump/6.png" id="14_h6tu2"]
[ext_resource type="Texture2D" uid="uid://ytrwpp3guvba" path="res://assets/gfx/player/idle/6.png" id="14_t0vdt"]
[ext_resource type="Texture2D" uid="uid://c3fwuup67vmoc" path="res://assets/gfx/player/jump/7.png" id="15_1vupu"]
[ext_resource type="Texture2D" uid="uid://bcsgmex2qdfvy" path="res://assets/gfx/player/jump/8.png" id="16_55ago"]
[ext_resource type="AnimationLibrary" uid="uid://dxk5x3vpu2xy5" path="res://src/frog/animations.tres" id="27_c4hqj"]
[ext_resource type="Script" path="res://src/frog/health_component.gd" id="29_ioey7"]
[ext_resource type="AudioStream" uid="uid://blik27yvxxi8l" path="res://assets/sfx/MC_Walk_1.wav" id="30_5un18"]
[ext_resource type="AudioStream" uid="uid://cfvxavlkb2pom" path="res://assets/sfx/MC_Walk_2.wav" id="31_galr7"]
[ext_resource type="AudioStream" uid="uid://cvp770wwghx36" path="res://assets/sfx/MC_Walk_3.wav" id="32_gumdw"]
[ext_resource type="AudioStream" uid="uid://cek8411v3lkeg" path="res://assets/sfx/MC_Walk_4.wav" id="33_ssug3"]
[ext_resource type="AudioStream" uid="uid://b8ionb2k02iw1" path="res://assets/sfx/MC_Big_Jump_1.wav" id="34_y1s18"]
[ext_resource type="AudioStream" uid="uid://b1swufjgsc76o" path="res://assets/sfx/MC_Big_Jump_2.wav" id="35_34bxl"]
[ext_resource type="AudioStream" uid="uid://cf70u60a7hts0" path="res://assets/sfx/MC_Big_Jump_3.wav" id="36_h51po"]
[ext_resource type="AudioStream" uid="uid://c3s0g26tvdyi0" path="res://assets/sfx/MC_hardlanding_dirt_1.wav" id="37_12bx8"]
[ext_resource type="AudioStream" uid="uid://brwythwaa35xf" path="res://assets/sfx/MC_hardlanding_dirt_2.wav" id="38_2c6rn"]
[ext_resource type="AudioStream" uid="uid://caehsnllwc636" path="res://assets/sfx/MC_hardlanding_dirt_3.wav" id="39_hxkld"]

[sub_resource type="SpriteFrames" id="SpriteFrames_g36ww"]
animations = [{
"frames": [{
"duration": 1.0,
"texture": ExtResource("5_4cau3")
}],
"loop": true,
"name": &"fall",
"speed": 5.0
}, {
"frames": [{
"duration": 1.0,
"texture": ExtResource("6_s2tbk")
}, {
"duration": 1.0,
"texture": ExtResource("7_ho7in")
}, {
"duration": 1.0,
"texture": ExtResource("8_ul0ep")
}, {
"duration": 1.0,
"texture": ExtResource("9_ppksw")
}],
"loop": true,
"name": &"hop",
"speed": 5.0
}, {
"frames": [{
"duration": 1.0,
"texture": ExtResource("9_ydjvk")
}, {
"duration": 1.0,
"texture": ExtResource("10_e3ynl")
}, {
"duration": 1.0,
"texture": ExtResource("11_a7dx1")
}, {
"duration": 1.0,
"texture": ExtResource("12_wt0sv")
}, {
"duration": 1.0,
"texture": ExtResource("13_rikfb")
}, {
"duration": 1.0,
"texture": ExtResource("14_t0vdt")
}],
"loop": true,
"name": &"idle",
"speed": 10.0
}, {
"frames": [{
"duration": 1.0,
"texture": ExtResource("10_171m6")
}, {
"duration": 1.0,
"texture": ExtResource("11_e7owm")
}, {
"duration": 1.0,
"texture": ExtResource("12_l7yib")
}, {
"duration": 1.0,
"texture": ExtResource("13_djaso")
}],
"loop": false,
"name": &"jump",
"speed": 5.0
}, {
"frames": [{
"duration": 1.0,
"texture": ExtResource("14_h6tu2")
}, {
"duration": 1.0,
"texture": ExtResource("15_1vupu")
}, {
"duration": 1.0,
"texture": ExtResource("16_55ago")
}],
"loop": false,
"name": &"land",
"speed": 5.0
}]

[sub_resource type="CapsuleShape2D" id="CapsuleShape2D_lh20e"]
radius = 67.0
height = 156.0

[sub_resource type="AudioStreamRandomizer" id="AudioStreamRandomizer_xim31"]
streams_count = 4
stream_0/stream = ExtResource("30_5un18")
stream_1/stream = ExtResource("31_galr7")
stream_2/stream = ExtResource("32_gumdw")
stream_3/stream = ExtResource("33_ssug3")

[sub_resource type="AudioStreamRandomizer" id="AudioStreamRandomizer_3ricb"]
streams_count = 3
stream_0/stream = ExtResource("34_y1s18")
stream_1/stream = ExtResource("35_34bxl")
stream_2/stream = ExtResource("36_h51po")

[sub_resource type="AudioStreamRandomizer" id="AudioStreamRandomizer_5sd1v"]
streams_count = 3
stream_0/stream = ExtResource("37_12bx8")
stream_1/stream = ExtResource("38_2c6rn")
stream_2/stream = ExtResource("39_hxkld")

[node name="Frog" type="CharacterBody2D"]
collision_layer = 2
script = ExtResource("1_mohle")

[node name="Controller" type="Node" parent="."]
script = ExtResource("2_mpehw")
max_jump_height = 350.0
hop_height = 60.0
min_jump_height = 100.0
double_jump_height = 300.0
hop_duration = 0.2
jump_duration = 0.5
falling_gravity_multiplier = 2.0
max_jump_amount = 2
max_acceleration = 15000
friction = 50

[node name="Head" parent="." instance=ExtResource("2_pyle1")]
position = Vector2(0, -106)

[node name="AnimatedSprite2D" type="AnimatedSprite2D" parent="."]
position = Vector2(4, -78)
sprite_frames = SubResource("SpriteFrames_g36ww")
animation = &"idle"

[node name="CollisionShape2D" type="CollisionShape2D" parent="."]
visible = false
position = Vector2(0, -78)
shape = SubResource("CapsuleShape2D_lh20e")

[node name="xsm" type="Node" parent="."]
script = ExtResource("2_ucc1o")
history_size = 0
disabled = false
debug_mode = false
target_path = NodePath("..")
timed = false
next_state = NodePath("idle")

[node name="idle" type="Node" parent="xsm"]
script = ExtResource("4_sbak6")
animation_player = NodePath("../../AnimationPlayer")
anim_on_enter = "idle"
loop_mode = 0
on_finished = 1
disabled = false
debug_mode = false
target_path = NodePath("../..")
timed = false
next_state = NodePath("../idle")

[node name="hop" type="Node" parent="xsm"]
script = ExtResource("5_dasfo")
animation_player = NodePath("../../AnimationPlayer")
anim_on_enter = "hop"
loop_mode = 0
on_finished = 1
disabled = false
debug_mode = false
target_path = NodePath("../..")
timed = false
next_state = NodePath("../idle")

[node name="jump" type="Node" parent="xsm"]
script = ExtResource("6_5df1m")
animation_player = NodePath("../../AnimationPlayer")
anim_on_enter = "jump"
loop_mode = 0
on_finished = 0
disabled = false
debug_mode = false
target_path = NodePath("../..")
timed = false
next_state = NodePath("../idle")

[node name="fall" type="Node" parent="xsm"]
script = ExtResource("7_c7jib")
animation_player = NodePath("../../AnimationPlayer")
anim_on_enter = "fall"
loop_mode = 0
on_finished = 0
disabled = false
debug_mode = false
target_path = NodePath("../..")
timed = false
next_state = NodePath("../idle")

[node name="land" type="Node" parent="xsm"]
script = ExtResource("8_4670w")
animation_player = NodePath("../../AnimationPlayer")
anim_on_enter = "land"
loop_mode = 0
on_finished = 1
disabled = false
debug_mode = false
target_path = NodePath("../..")
timed = false
next_state = NodePath("../idle")

[node name="attached" type="Node" parent="xsm"]
script = ExtResource("28_evnt1")
animation_player = NodePath("../../AnimationPlayer")
anim_on_enter = "idle"
loop_mode = 0
on_finished = 1
disabled = false
debug_mode = false
target_path = NodePath("")
timed = false
next_state = NodePath("")

[node name="swing" type="Node" parent="xsm"]
script = ExtResource("29_bxkrg")
animation_player = NodePath("../../AnimationPlayer")
anim_on_enter = "idle"
loop_mode = 0
on_finished = 1
disabled = false
debug_mode = false
target_path = NodePath("")
timed = false
next_state = NodePath("")

[node name="AnimationPlayer" type="AnimationPlayer" parent="."]
libraries = {
"": ExtResource("27_c4hqj")
}

[node name="rc_front" type="RayCast2D" parent="."]
position = Vector2(0, -31)
target_position = Vector2(60, 0)

[node name="HealthComponent" type="Node" parent="."]
script = ExtResource("29_ioey7")

[node name="sfx" type="Node2D" parent="."]

[node name="sfx_hop" type="AudioStreamPlayer2D" parent="sfx"]
stream = SubResource("AudioStreamRandomizer_xim31")
bus = &"Sound"

[node name="sfx_jump" type="AudioStreamPlayer2D" parent="sfx"]
stream = SubResource("AudioStreamRandomizer_3ricb")
bus = &"Sound"

[node name="sfx_soft_landing" type="AudioStreamPlayer2D" parent="sfx"]
bus = &"Sound"

[node name="sfx_hard_landing" type="AudioStreamPlayer2D" parent="sfx"]
stream = SubResource("AudioStreamRandomizer_5sd1v")
bus = &"Sound"

[node name="sfx_eat" type="AudioStreamPlayer2D" parent="sfx"]
bus = &"Sound"

[node name="sfx_tongue_attack" type="AudioStreamPlayer2D" parent="sfx"]
bus = &"Sound"

[connection signal="direction_changed" from="Controller" to="." method="_on_controller_direction_changed"]
[connection signal="hit_ground" from="Controller" to="." method="_on_controller_hit_ground"]
[connection signal="hopped" from="Controller" to="." method="_on_controller_hopped"]
[connection signal="jump_requested" from="Controller" to="." method="_on_controller_jump_requested"]
[connection signal="jumped" from="Controller" to="." method="_on_controller_jumped"]
[connection signal="started_falling" from="Controller" to="." method="_on_controller_started_falling"]
[connection signal="shot_finished" from="Head" to="." method="_on_head_shot_finished"]
[connection signal="died" from="HealthComponent" to="." method="_on_health_component_died"]
[connection signal="energy_changed" from="HealthComponent" to="." method="_on_health_component_energy_changed"]
